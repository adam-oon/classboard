<!doctype html>
<html lang="en">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.js"></script>
    <script>
        function deleteCourse(event,id) {
            event.preventDefault();
            $('#responseMessage').html("");

            $.ajax({
                url: 'api/v1/classroom/'+id,
                type: 'delete',
                success: function (response) {
                    if (response != undefined) {
                        $('#responseMessage').html("<b style='color:green'>"+response.ResponseText+"</b>");
                    }
                    location.reload()
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    $('#responseMessage').html("<b style='color:red'>"+XMLHttpRequest.responseJSON.ResponseText+"</b>");
                },
            });
        }
    </script>
    <style>
        table, th, td {
            border: 1.5px solid gray;
            border-collapse: collapse;
            padding: 5px;
        }
        table {
            margin-left: auto; 
            margin-right: auto;
        }
    </style>
    <head>
        <meta charset="UTF-8">
        <title>Welcome to the ClassBoard</title>
    </head>

    <body style="text-align: center;">

        <h1><u>ClassBoard Dashboard</u></h1>
        <div id="responseMessage"></div><br/>

        {{if .Classroom}}
        
        <table>
            <tr>
                <th>ID</th>
                <th>Code</th>
                <th>Title</th>
                <th colspan="2">Action</th>
            </tr>
            {{range $key, $val := .Classroom}}
            <tr>
                <td>{{$val.Id}}</td>
                <td>{{$val.Code}}</td>
                <td>{{$val.Title}}</td>
                <td>&nbsp;<a href="/classroom/{{$val.Id}}/question"><i>Questions</i></a>&nbsp;</td>
                <td>&nbsp;<a href="/courses" onclick="deleteClassroom(event,{{$val.Id}})"><i>Delete</i></a>&nbsp;</td>
            </tr>
            {{end}}
            <tr>
                {{if eq .User.Type "lecturer"}}
                <td colspan="5">+<a href="/classroom/add"><i>Add new classroom</i></a></td>
                {{else if eq .User.Type "student" }}
                <td colspan="5">+<a href="/classroom/join"><i> Join new classroom</i></a></td>
                {{end}}
            </tr>
        </table>
        {{else}}
        <h4>There is no classroom here! Please <a href="/classroom/add">add a classroom</a> first!</h4>
        {{end}}

        {{template "bottom_nav"}}
    </body>
</html>